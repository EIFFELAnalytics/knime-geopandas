<?xml version="1.0" encoding="UTF-8"?>
<config xmlns="http://www.knime.org/2008/09/XMLConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.knime.org/2008/09/XMLConfig http://www.knime.org/XMLConfig_2008_09.xsd" key="Simplify__2277173519475740200.xml">
<entry key="category" type="xstring" value="scikit learn"/>
<entry key="title" type="xstring" value="Simplify"/>
<entry key="description" type="xstring" value=""/>
<entry key="sourcecode" type="xstring" value="# PARAMETERS%%00010# Het versimpelde polygoon mag `tolerance` (in graden) afwijken van het origineel.%%00010# In Nederland: 1 m ~= 1e-5 graden%%00010tolerance = 1e-5%%00010%%00010# SIMPLIFY%%00010import geopandas as gpd%%00010import pandas as pd%%00010from shapely import wkt as WKT%%00010%%00010# Convert geopandas (with geometry column) to pandas (with wkt column)%%00010def gdf_to_df(gdf, **kwargs):%%00010    df = pd.DataFrame(gdf, copy=True)%%00010    df['wkt'] = gdf.geometry.apply(%%00010        lambda wkt: WKT.dumps(wkt, trim=True, rounding_precision=kwargs.get('rounding_precision', -1))%%00010    )%%00010    df.drop(columns='geometry', inplace=True)%%00010    return df%%00010%%00010# Convent pandas (with wkt column) to geopandas (with geometry column)%%00010def df_to_gdf(df):%%00010    gdf = gpd.GeoDataFrame(df, copy=True)%%00010    gdf['geometry'] = df.wkt.apply(WKT.loads)%%00010    gdf.drop(columns='wkt', inplace=True)%%00010    return gdf%%00010%%00010# Read input%%00010gdf = df_to_gdf(input_table)%%00010%%00010# Simplify with fixed threshold%%00010gdf.geometry = gdf.geometry.simplify(tolerance, preserve_topology=True)%%00010%%00010# Dynamic simplify. Threshold is 0.1% van de omtrek%%00010#dynamic_simplify = lambda geom: geom.simplify(geom.length*0.001, preserve_topology=True)%%00010#gdf.geometry = gdf.geometry.apply(dynamic_simplify)%%00010%%00010# Output%%00010output_table = gdf_to_df(gdf)"/>
</config>
